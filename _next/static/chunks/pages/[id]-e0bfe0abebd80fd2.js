(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[112],{1522:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[id]",function(){return t(4014)}])},4014:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSG:function(){return W},default:function(){return G}});var r=t(4051),o=t.n(r),a=t(5893),c=t(6574),s=t(1889),u=t(4842),l=t(5152),_=t.n(l),d=c.Z.TabPane,m=_()(Promise.all([t.e(281),t.e(969),t.e(286)]).then(t.bind(t,2286)),{loadableGenerated:{webpack:function(){return[2286]}},ssr:!1});var f=function(e){var n=e.disabled,t=e.sourceCode,r=e.setSourceCode,o=e.activeTab,i=e.handleUserTabChange,l=e.myHeight,_=e.lang,f=(0,a.jsxs)(s.Z,{disabled:n,onClick:function(){return i(o)},children:[(0,a.jsx)(u.Z,{})," Run"]});return(0,a.jsx)("div",{className:"card-container",style:{height:"100%"},children:(0,a.jsx)(c.Z,{tabBarExtraContent:f,style:{height:"100%"},children:(0,a.jsx)(d,{tab:"main"+("lpython"===_?".py":".f90"),style:{height:l},children:(0,a.jsx)(m,{sourceCode:t,setSourceCode:r,lang:_})},"1")})})},p=t(7132),h=t(5439);var g=function(e){var n=e.activeTab,t=e.output,r=e.handleUserTabChange,o=e.myHeight;return(0,a.jsxs)("div",{className:"card-container",children:[(0,a.jsx)(h.Z,{block:!0,style:{margin:"6px 0px 22px 0px"},options:["STDOUT","AST","ASR","WAT","CPP"],value:n,onChange:function(e){return r(e)}}),(0,a.jsx)(s.Z,{onClick:function(){navigator.clipboard.writeText(t)},style:{position:"absolute",right:"40px",top:"80px"},children:(0,a.jsx)(p.Z,{})}),(0,a.jsx)("pre",{style:{margin:"0px",height:o,overflow:"scroll",border:"1px solid black"},children:(0,a.jsx)("div",{id:"outputBox",style:{minHeight:"100%",fontSize:"0.9em",padding:"10px"},dangerouslySetInnerHTML:{__html:t}})})]})},x=t(4298),y=t.n(x),w=t(7294);function b(e,n,t,r,o,i,a){try{var c=e[i](a),s=c.value}catch(u){return void t(u)}c.done?n(s):Promise.resolve(s).then(r,o)}function v(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){b(i,r,o,a,c,"next",e)}function c(e){b(i,r,o,a,c,"throw",e)}a(void 0)}))}}function j(){return new Promise((function(e,n){Module.onRuntimeInitialized=function(){e({emit_ast_from_source:Module.cwrap("emit_ast_from_source","string",["string"]),emit_asr_from_source:Module.cwrap("emit_asr_from_source","string",["string"]),emit_wat_from_source:Module.cwrap("emit_wat_from_source","string",["string"]),emit_cpp_from_source:Module.cwrap("emit_cpp_from_source","string",["string"]),emit_py_from_source:Module.cwrap("emit_wat_from_source","string",["string"]),emit_wasm_from_source:Module.cwrap("emit_wasm_from_source","string",["string"])})}}))}function N(e,n,t,r){var o=function(e){return n.push(e.toString())},i=function(){r(n.join(" ")+"\n"),n.length=0};return{js:{memory:e,print_i32:o,print_i64:o,print_f32:o,print_f64:o,print_str:function(t,r){return n.push(new TextDecoder("utf8").decode(new Uint8Array(e.buffer,t,r)))},flush_buf:i,set_exit_code:function(e){return t.val=e},cpu_time:function(e){return Date.now()/1e3},show_img:function(t,r,o){var a=new DataView(e.buffer,o,Int32Array.BYTES_PER_ELEMENT*r*t),c=document.createElement("CANVAS");c.width=t,c.height=r;for(var s=c.getContext("2d"),u=s.createImageData(t,r),l=0;l<u.data.length;l+=4)u.data[l+0]=a.getInt32(l,!0),u.data[l+1]=a.getInt32(l,!0),u.data[l+2]=a.getInt32(l,!0),u.data[l+3]=255;s.putImageData(u,0,0),n.push('<img alt="constructed image" src="'.concat(c.toDataURL("image/jpeg"),'" height="').concat(r,'" width="').concat(t,'" style="aspect-ratio: 1 / 1;"/>')),i()},show_img_color:function(t,r,o){var a=new DataView(e.buffer,o,4*Int32Array.BYTES_PER_ELEMENT*r*t),c=document.createElement("CANVAS");c.width=t,c.height=r;for(var s=c.getContext("2d"),u=s.createImageData(t,r),l=0;l<u.data.length;l++)u.data[l]=a.getInt32(4*l,!0);s.putImageData(u,0,0),n.push('<img alt="constructed image" src="'.concat(c.toDataURL("image/jpeg"),'" height="').concat(r,'" width="').concat(t,'" style="aspect-ratio: 1 / 1;"/>')),i()}}}}function T(e,n){return R.apply(this,arguments)}function R(){return(R=v(o().mark((function e(n,t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,WebAssembly.instantiate(n,t);case 3:r=e.sent,(0,r.instance.exports._lcompilers_main)(),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:return e.abrupt("return","Success");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function S(e,n){return A.apply(this,arguments)}function A(){return A=v(o().mark((function e(n,t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:r=e.sent,n.emit_ast_from_source=function(e){try{return r.emit_ast_from_source(e)}catch(n){return console.log(n),t(n+"\nERROR: AST could not be generated from the code"),0}},n.emit_asr_from_source=function(e){try{return r.emit_asr_from_source(e)}catch(n){return console.log(n),t(n+"\nERROR: ASR could not be generated from the code"),0}},n.emit_wat_from_source=function(e){try{return r.emit_wat_from_source(e)}catch(n){return console.log(n),t(n+"\nERROR: WAT could not be generated from the code"),0}},n.emit_cpp_from_source=function(e){try{return r.emit_cpp_from_source(e)}catch(n){return console.log(n),t(n+"\nERROR: CPP could not be generated from the code"),0}},n.emit_py_from_source=function(e){try{return r.emit_py_from_source(e)}catch(n){return console.log(n),t(n+"\nERROR: LLVM could not be generated from the code"),0}},n.compile_code=function(e){try{return r.emit_wasm_from_source(e)}catch(n){return console.log(n),t(n+"\nERROR: The code could not be compiled. Either there is a compile-time error or there is an issue at our end."),0}},n.execute_code=function(){var e=v(o().mark((function e(n,r){var i,a,c,s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={val:1},a=[],c=new WebAssembly.Memory({initial:100,maximum:100}),s=N(c,a,i,r),e.next=6,T(n,s);case 6:if(u=e.sent,0!=i.val){e.next=9;break}return e.abrupt("return",1);case 9:return console.log(u),t(u+"\nERROR: The code could not be executed. Either there is a runtime error or there is an issue at our end."),e.abrupt("return",0);case 12:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();case 10:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}var C=function(e){var n=e.moduleReady,t=e.setModuleReady,r=e.lfortran_funcs,i=e.openNotification,c=e.myPrint,s=e.handleUserTabChange,u=e.lang,l=(0,w.useCallback)(v(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(r,c);case 2:t(!0),i("LCompiler Module Initialized!","bottomRight"),console.log("LCompiler Module Initialized!"),s("STDOUT");case 6:case"end":return e.stop()}}),e)}))),[n]);return(0,a.jsx)("div",{children:(0,a.jsx)(y(),{src:"./".concat(u,".js"),onLoad:l})})},k={lpython:{src_code_mandel_brot:'@ccall\ndef show_img(w: i32, h: i32, A: i32[h, w]):\n    pass\n\n@ccall\ndef show_img_color(w: i32, h: i32, A: i32[h, w, 4]):\n    pass\n\ndef main0():\n    Nx: i32 = 600; Ny: i32 = 450; n_max: i32 = 255\n\n    xcenter: f64 = -0.5; ycenter: f64 = 0.0\n    width: f64 = 4; height: f64 = 3\n    dx_di: f64 = width/Nx; dy_dj: f64 = -height/Ny\n    x_offset: f64 = xcenter - (Nx+1)*dx_di/2; y_offset: f64 = ycenter - (Ny+1)*dy_dj/2\n\n    i: i32; j: i32; n: i32; idx: i32\n    x: f64; y: f64; x_0: f64; y_0: f64; x_sqr: f64; y_sqr: f64\n\n    image: i32[450, 600] = empty(Ny, Nx)\n    image_color: i32[450, 600, 4] = empty(Ny, Nx, 4)\n    palette: i32[4, 3] = empty(4, 3)\n\n    for j in range(Ny):\n        y_0 = y_offset + dy_dj * (j + 1)\n        for i in range(Nx):\n            x_0 = x_offset + dx_di * (i + 1)\n            x = 0.0; y = 0.0; n = 0\n            while(True):\n                x_sqr = x ** 2.0\n                y_sqr = y ** 2.0\n                if (x_sqr + y_sqr > 4 or n == n_max):\n                    image[j,i] = 255 - n\n                    break\n                y = y_0 + 2 * x * y\n                x = x_0 + x_sqr - y_sqr\n                n = n + 1\n\n    palette[0,0] =   0; palette[0,1] = 135; palette[0,2] =  68\n    palette[1,0] =   0; palette[1,1] =  87; palette[1,2] = 231\n    palette[2,0] = 214; palette[2,1] =  45; palette[2,2] =  32\n    palette[3,0] = 255; palette[3,1] = 167; palette[3,2] =   0\n\n    for j in range(Ny):\n        for i in range(Nx):\n            idx = image[j,i] - int(image[j,i]/4)*4\n            image_color[j,i,0] = palette[idx,0] # Red\n            image_color[j,i,1] = palette[idx,1] # Green\n            image_color[j,i,2] = palette[idx,2] # Blue\n            image_color[j,i,3] = 255            # Alpha\n\n    print("The Mandelbrot image in color:")\n    show_img_color(Nx, Ny, image_color)\n    print("The Mandelbrot image in grayscale:")\n    show_img(Nx, Ny, image)\n    print("Done.")\n\nmain0()\n'},lfortran:{src_code_mandel_brot:'program mandelbrot\ninteger, parameter :: Nx = 600, Ny = 450, n_max = 255, dp=kind(0.d0)\nreal(dp), parameter :: xcenter = -0.5_dp, ycenter = 0.0_dp, &\n    width = 4, height = 3, dx_di = width/Nx, dy_dj = -height/Ny, &\n    x_offset = xcenter - (Nx+1)*dx_di/2, y_offset = ycenter - (Ny+1)*dy_dj/2\ninteger :: image(Nx,Ny), image_color(4,Nx,Ny), palette(3,4), i, j, n, idx\nreal(dp) :: x, y, x_0, y_0, x_sqr, y_sqr\ninterface\n    subroutine show_img(w, h, A) bind(c)\n    integer, intent(in) :: w, h\n    integer, intent(in) :: A(w,h)\n    end subroutine\n    subroutine show_img_color(w, h, A) bind(c)\n    integer, intent(in) :: w, h\n    integer, intent(in) :: A(4,w,h)\n    end subroutine\nend interface\ndo j = 1, Ny\n    y_0 = y_offset + dy_dj * j\n    do i = 1, Nx\n        x_0 = x_offset + dx_di * i\n        x = 0; y = 0; n = 0\n        do\n            x_sqr = x ** 2; y_sqr = y ** 2\n            if (x_sqr + y_sqr > 4 .or. n == n_max) then\n                image(i,j) = 255-n\n                exit\n            end if\n            y = y_0 + 2 * x * y\n            x = x_0 + x_sqr - y_sqr\n            n = n + 1\n        end do\n    end do\nend do\npalette(1,1) =   0; palette(2,1) = 135; palette(3,1) =  68\npalette(1,2) =   0; palette(2,2) =  87; palette(3,2) = 231\npalette(1,3) = 214; palette(2,3) =  45; palette(3,3) =  32\npalette(1,4) = 255; palette(2,4) = 167; palette(3,4) =   0\ndo j = 1, Ny\n    do i = 1, Nx\n        idx = image(i,j) - (image(i,j)/4)*4 + 1\n        image_color(1,i,j) = palette(1,idx) ! Red\n        image_color(2,i,j) = palette(2,idx) ! Green\n        image_color(3,i,j) = palette(3,idx) ! Blue\n        image_color(4,i,j) = 255            ! Alpha\n    end do\nend do\nprint *, "The Mandelbrot image in color:"\ncall show_img_color(Nx, Ny, image_color)\nprint *, "The Mandelbrot image in grayscale:"\ncall show_img(Nx, Ny, image)\nprint *, "Done."\nend program mandelbrot\n'}},E=t(6348),M=t(6226),P=t(1382),I=t(9614),U=t(888),q=t(4431);function D(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function O(e,n,t,r,o,i,a){try{var c=e[i](a),s=c.value}catch(u){return void t(u)}c.done?n(s):Promise.resolve(s).then(r,o)}function Z(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){O(i,r,o,a,c,"next",e)}function c(e){O(i,r,o,a,c,"throw",e)}a(void 0)}))}}function L(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return D(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return D(e,n)}(e,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var B=new(t.n(q)()),H=(0,a.jsx)(U.Z,{style:{fontSize:24},spin:!0}),z=function(e,n){I.Z.info({message:e,placement:n})},V={emit_ast_from_source:null,emit_asr_from_source:null,emit_wat_from_source:null,emit_wasm_from_source:null,emit_cpp_from_source:null,emit_py_from_source:null,compile_code:null,execute_code:null},W=!0;function G(e){var n=e.lang,t=(0,w.useState)(!1),r=t[0],i=t[1],c=(0,w.useState)(k[n].src_code_mandel_brot),s=c[0],u=c[1],l=(0,w.useState)("STDOUT"),_=l[0],d=l[1],m=(0,w.useState)(""),p=m[0],h=m[1],x=(0,w.useState)("calc(100vh - 170px)"),y=x[0];x[1];function b(e){return v.apply(this,arguments)}function v(){return(v=Z(o().mark((function e(n){var t,r,i,a,c,u,l,_,m;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("STDOUT"!=n){e.next=19;break}if(""!==s.trim()){e.next=5;break}return h("No Source Code to compile"),d(n),e.abrupt("return");case 5:if(!(t=V.compile_code(s))){e.next=17;break}if(r=L(t.split(",")),i=r[0],a=r.slice(1),"0"===i){e.next=12;break}h(B.ansi_to_html(a)),e.next=17;break;case 12:return c=[],e.next=15,V.execute_code(new Uint8Array(a),(function(e){return c.push(e)}));case 15:e.sent&&h(c.join(""));case 17:e.next=20;break;case 19:"AST"==n?(u=V.emit_ast_from_source(s))&&h(B.ansi_to_html(u)):"ASR"==n?(l=V.emit_asr_from_source(s))&&h(B.ansi_to_html(l)):"WAT"==n?(_=V.emit_wat_from_source(s))&&h(B.ansi_to_html(_)):"CPP"==n?(m=V.emit_cpp_from_source(s))&&h(B.ansi_to_html(m)):"PY"==n?h("Support for PY is not yet enabled"):(console.log("Unknown key:",n),h("Unknown key: "+n));case 20:d(n);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C,{moduleReady:r,setModuleReady:i,lfortran_funcs:V,openNotification:z,myPrint:h,handleUserTabChange:b,lang:n}),(0,a.jsxs)(E.Z,{gutter:[16,16],children:[(0,a.jsx)(M.Z,{xs:{span:24},sm:{span:24},md:{span:12},children:(0,a.jsx)(f,{disabled:!r,sourceCode:s,setSourceCode:u,activeTab:_,handleUserTabChange:b,myHeight:y,lang:n})}),(0,a.jsx)(M.Z,{xs:{span:24},sm:{span:24},md:{span:12},children:r?(0,a.jsx)(g,{activeTab:_,output:p,handleUserTabChange:b,myHeight:y}):(0,a.jsx)(P.Z,{style:{position:"relative",top:"50%",left:"50%"},indicator:H})})]})]})}}},function(e){e.O(0,[459,774,888,179],(function(){return n=1522,e(e.s=n);var n}));var n=e.O();_N_E=n}]);